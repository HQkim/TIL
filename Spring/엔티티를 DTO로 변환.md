# 엔티티를 DTO로 변환

### 엔티티를 DTO로 변환할 때

- Entity를 DTO에 한번 감싼다는 의미가 아님
  - Request, Response의 모든 파라미터를 Entity와 분리!
- 실무에서는 조금 쿼리가 복잡해지면 QueryDsl로 편하게 쿼리를 짤 수 있다!
  - fetch join도 안씀

### 페치 조인 최적화

- 일대다 페치 조인이 있을 때는, 페이징하면 안된다.
  - 왜냐하면 “일”이 기준이 아니라 “다”를 기준으로 row의 개수가 결정되기 때문에, “일”을 기준으로 페이징을 할 수 없다.
  - 그래서 이를 메모리에서 페이징 처리하는데, 치명적인 시스템 결함!
- 컬렉션 페치 조인은 1개만 사용할 수 있음. 컬렉션 둘 이상에 페치 조인을 사용하면 데이터가 뻥튀기가 되고 부정합하게 조회될 수 있음.